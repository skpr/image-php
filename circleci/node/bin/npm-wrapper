#!/bin/sh

# Disable all interactive post install scripts
# This is a security measure to avoid running arbitrary code during package installation
# See also:
# - https://socket.dev/blog/ongoing-supply-chain-attack-targets-crowdstrike-npm-packages
export NPM_CONFIG_IGNORE_SCRIPTS=true

cat <<'EOF'
============================================================
⚠️  DISCLAIMER: Package lifecycle scripts are disabled ⚠️
============================================================

Environment variable enforced:
  NPM_CONFIG_IGNORE_SCRIPTS=true

Scripts will NOT run during npm install.

If you need to bypass this restriction (not recommended),
you must explicitly invoke:

  npm-unsafe <command>

⚠️  WARNING: Running with npm-unsafe allows untrusted scripts
    to execute and may compromise your system.

------------------------------------------------------------
From the Skpr Platform Team
============================================================
EOF

# Put a gap between the disclaimer and the command output
echo

npm-unsafe "$@"
